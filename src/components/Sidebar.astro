---
import { ExternalLink } from "lucide-astro";

const navItems = [
    {
        category: "Introduction",
        items: [{ text: "Introduction", href: "/docs" }],
    },
    {
        category: "Getting Started",
        items: [
            { text: "Installation", href: "/docs/getting_started" },
            { text: "Quick Start", href: "/docs/quick_start" },
        ],
    },
    {
        category: "Core Concepts",
        items: [
            { text: "Components", href: "/docs/component_guide" },
            { text: "State Management", href: "/docs/state_management" },
            { text: "Lifecycle", href: "/docs/lifecycle" },
        ],
    },
    {
        category: "Styling",
        items: [{ text: "Styling Guide", href: "/docs/styling_guide" }],
    },
    {
        category: "API Reference",
        items: [
            { text: "API Reference", href: "/docs/api_reference" },
            { text: "CLI Commands", href: "/docs/cli" },
        ],
    },
    {
        category: "Deployment",
        items: [
            { text: "Vercel", href: "/docs/vercel_deployment" },
            { text: "Netlify", href: "/docs/netlify_deployment" },
        ],
    },
    {
        category: "Resources",
        items: [
            { text: "Troubleshooting", href: "/docs/troubleshooting" },
            {
                text: "Community",
                href: "https://github.com/XplnHUB/xplnhub-snakeskin",
                external: true,
            },
        ],
    },
];

const { pathname } = Astro.url;
---

<aside
    class="fixed left-0 top-16 w-64 h-[calc(100vh-4rem)] overflow-y-auto border-r border-white/5 bg-bg-core/50 backdrop-blur-sm hidden lg:block"
>
    <nav class="p-6 space-y-8">
        {
            navItems.map((section) => (
                <div>
                    <h5 class="text-xs font-semibold text-white/40 uppercase tracking-wider mb-3 px-2">
                        {section.category}
                    </h5>
                    <ul class="space-y-1">
                        {section.items.map((item) => {
                            const isActive =
                                pathname === item.href ||
                                (item.href !== "/docs" &&
                                    pathname.startsWith(item.href));
                            return (
                                <li>
                                    <a
                                        href={item.href}
                                        target={
                                            item.external ? "_blank" : "_self"
                                        }
                                        class:list={[
                                            "flex items-center gap-2 px-2 py-1.5 text-sm rounded-md transition-all duration-200",
                                            isActive
                                                ? "text-accent-primary bg-accent-primary/5 font-medium"
                                                : "text-neutral-400 hover:text-white hover:bg-white/5",
                                        ]}
                                    >
                                        {item.text}
                                        {item.external && (
                                            <ExternalLink class="w-3 h-3 opacity-50" />
                                        )}
                                    </a>
                                </li>
                            );
                        })}
                    </ul>
                </div>
            ))
        }
    </nav>
</aside>
