---
import Layout from "./Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Sidebar from "../components/Sidebar.astro";
import TableOfContents from "../components/TableOfContents.astro";
import type { MarkdownHeading } from "astro";

interface Props {
    title: string;
    headings?: MarkdownHeading[];
}

const { title, headings } = Astro.props;
---

<Layout title={title}>
    <Header />

    <div class="flex max-w-[1600px] mx-auto min-h-screen pt-16">
        {/* Left Sidebar */}
        <Sidebar />

        {/* Main Content */}
        <main class="flex-1 lg:pl-64 lg:pr-64">
            <div class="px-6 py-10 lg:px-12 max-w-4xl mx-auto">
                {/* Breadcrumbs (Placeholder for now) */}
                <div class="text-sm text-neutral-500 mb-8 font-mono">
                    Docs <span class="mx-2">/</span>
                    {title}
                </div>

                <article
                    class="prose prose-invert prose-neutral max-w-none
          prose-headings:font-bold prose-headings:tracking-tight prose-headings:text-white
          prose-h1:text-4xl prose-h1:mb-6 prose-h1:bg-gradient-to-r prose-h1:from-white prose-h1:to-white/50 prose-h1:bg-clip-text prose-h1:text-transparent
          prose-p:text-neutral-400 prose-p:leading-7
          prose-code:text-accent-primary prose-code:font-mono prose-code:bg-white/5 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded
          prose-pre:bg-[#0D0D0D] prose-pre:border prose-pre:border-white/5 prose-pre:rounded-xl
          prose-a:text-accent-secondary prose-a:no-underline hover:prose-a:underline
          prose-strong:text-white"
                >
                    <slot />
                </article>

                <div class="mt-20 pt-10 border-t border-white/5">
                    <Footer />
                </div>
            </div>
        </main>

        {/* Right Sidebar (TOC) */}
        {
            headings && (
                <aside class="fixed right-0 top-16 w-64 h-[calc(100vh-4rem)] overflow-y-auto hidden xl:block py-10 pr-6">
                    <TableOfContents headings={headings} />
                </aside>
            )
        }
    </div>
</Layout>
